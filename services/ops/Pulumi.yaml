name: ops
runtime: yaml
description: Operational visibility stack fed by the centralized env and container-group services.

config:
  envStackRef:
    type: string
  containerGroupStackRef:
    type: string

resources:
  env:
    type: pulumi:pulumi:StackReference
    properties:
      name: ${envStackRef}
  containerGroup:
    type: pulumi:pulumi:StackReference
    properties:
      name: ${containerGroupStackRef}

outputs:
  resourceGroupName: ${env.outputs.resourceGroupName}
  logAnalyticsWorkspaceId: ${env.outputs.logAnalyticsWorkspaceId}
  keyVaultUri: ${env.outputs.keyVaultUri}
  containerGroupId: ${containerGroup.outputs.containerGroupId}
  containerFqdn: ${containerGroup.outputs.fqdn}
